# 责任链模式
## 场景
> 多个不同的对象处理相同的事务, 且该对象必须在代码运行时才能确定. 同时用户只关心处理结果, 不关心执行对象.


## 示例
> 员工发起请假时, 需要经过领导的审批, 而请假天数不同, 往往需要不同角色的领导来审批.
``` ts
abstract class AHandler {
  let nextHandler: AHandler;

  setNextHandler(handler: AHandler) {
    this.nextHandler = handler
  }

  getNextHandler() {
    return this.nextHandler
  }

  abstract handleRequest(name: string, payload: number): void
}

// 团队领导
class TeamLeaderHandler extends AHandler {
  handleRequest(name: string, payload: number) {
    const msg = `${name} 向团队领导请 ${payload} 天假, 望批准!`;
    if (payload <= 2) {
      console.log(`${msg}, 通过! \r\n`);
    } else {
      console.log(`${msg}, 主管批准!`);
      this.getNextHandler() &&
        this.getNextHandler().handleRequest(name, payload);
    }
  }
}
// 主管
class ManagerHandler extends AHandler {
  handleRequest(name: string, payload: number) {
    const msg = `${name} 向主管领导请 ${payload} 天假, 望批准!`;
    if (3 <= payload && payload <= 5) {
      console.log(`${msg}, 通过! \r\n`);
    } else {
      console.log(`${msg}, 主任批准!`);
      this.getNextHandler() &&
        this.getNextHandler().handleRequest(name, payload);
    }
  }
}

// 主任
class DirectorHandler extends AHandler {
  handleRequest(name: string, payload: number) {
    const msg = `${name} 向主任请 ${payload} 天假, 望批准!`;
    if (5 > payload) {
      console.log(`${msg}, 通过! \r\n`);
    }
  }
}

// 请假流程
class DayOffFlow {
  let handler: AHandler;
  constructor() {
    this.handler = this.initHandler();
  }

  initHandler() {
    const teamLeaderHandler = new TeamLeaderHandler();
    const managerHandler = new ManagerHandler();
    const directorHandler = new DirectorHandler();
    teamLeaderHandler.setNextHandler(managerHandler);
    managerHandler.setNextHandler(directorHandler);
    return teamLeaderHandler;
  }

  handleRequest(name: string, payload: number) {
    this.handler.handleRequest(name, payload);
  }
}

new DayOffFlow().handleRequest('张三', 1)
new DayOffFlow().handleRequest('李四', 3)
new DayOffFlow().handleRequest('王五', 8)

```